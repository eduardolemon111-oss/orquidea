{% extends "layout.html" %}
{% block title %}Carrito - Mi Tienda{% endblock %}
{% block content %}

<h1 style="text-align:center; margin-bottom:25px;">Tu Carrito</h1>

<style>
.table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 25px;
}

.table th, .table td {
    padding: 12px;
    border-bottom: 1px solid #ddd;
    text-align: center;
    vertical-align: middle;
}

/* üî• IM√ÅGENES CHIQUITAS Y PROPORCIONALES */
.product-img {
    width: 45px;
    height: auto;
    object-fit: contain;
    display: block;
    margin: 0 auto;
}

.btn {
    background: #ef4444;
    color: white;
    padding: 6px 12px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
}

.btn:hover {
    background: #b91c1c;
}

.btn-blue {
    background: #2563eb;
    color: white;
    padding: 8px 14px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
}

.btn-blue:hover {
    background: #1e40af;
}
</style>

{% if carrito %}

<table class="table">
    <tr>
        <th>Producto</th>
        <th>Imagen</th>
        <th>Precio</th>
        <th>Cantidad</th>
        <th>Total</th>
        <th>Acci√≥n</th>
    </tr>

    {% for item in carrito %}
    <tr>
        <td>{{ item[1] }}</td>

        <td>
            <img src="{{ url_for('static', filename='img/' ~ item[4]) }}"
                 class="product-img">
        </td>

        <td>$ {{ item[2] }}</td>
        <td>{{ item[3] }}</td>
        <td>$ {{ item[2] * item[3] }}</td>

        <td>
            <form action="/quitar/{{ item[0] }}" method="POST">
                <button class="btn" type="submit">Eliminar</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>

<h2 style="text-align:center; margin-bottom:25px;">
    Total: ${{ total }}
</h2>

<div style="text-align:center;">
    <a href="/pago"><button class="btn-blue">Pagar</button></a>
</div>

{% else %}

<h3 style="text-align:center; margin-top:40px;">Tu carrito est√° vac√≠o</h3>
<div style="text-align:center;">
    <a href="/productos"><button class="btn-blue">Ver productos</button></a>
</div>

{% endif %}

{% endblock %}
